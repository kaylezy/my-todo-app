(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=l(t);fetch(t.href,n)}})();window.$$=document.querySelectorAll.bind(document);window.$=document.querySelector.bind(document);Node.prototype.on=window.on=function(r,e){this.addEventListener(r,e)};NodeList.prototype.__proto__=Array.prototype;NodeList.prototype.on=NodeList.prototype.addEventListener=function(r,e,l){this.forEach(function(i,t){i.on(r,e,l)})};function y(r,e,l){const i=document.createElement(r);return e&&Object.assign(i,e),l&&i.prepend(...l),i}window.mk=y;function h(){let r={id:0,todos:[]},e={input:$("input"),form:$("form")};return mk("div",{id:"app"},[mk("h1",null,["Todo App: A simple app to track your todos"]),e.form=mk("form",{id:"form"},[e.input=mk("input",{className:"todo",type:"text",id:"todo",placeholder:"Enter a todo"}),e.add=mk("button",{type:"submit",onclick:i},["Add Todo"])]),e.todos=mk("ul",{id:"todos"})]);function l(t){let n,o,d;function u(){r.todos=r.todos.filter(s=>s.id!==t.id),n.remove()}function f(){function s(a){switch(a.key){case"Enter":console.log(a.key),o.textContent=t.text=c.value;case"Escape":c.blur()}}const m=()=>{d.disabled=c.replaceWith(o),d.style="cursor: pointer;pointer-events: auto;"};let c=mk("input",{style:"flex: 1;",onkeydown:s,value:t.text,onblur:m});o.replaceWith(c),c.focus(),d.disabled=!0,d.style="cursor: not-allowed;pointer-events: none;"}return n=mk("li",{className:"todo-item",style:"display: flex;place-items: center;padding-bottom: 4px;"},[o=mk("span",{style:"flex: 1;",ondblclick:f},[t.text]),d=mk("button",{onclick:u},["X"])]),n}function i(t){t.preventDefault();const n=e==null?void 0:e.input.value;if(!n){alert("Please enter a todo!");return}e.input.value="";const o={text:n,completed:!1,id:Date.now()};r.todos.push(o),e==null||e.todos.prepend(l(o))}}function E(){document.body.prepend(h())}E();function v(r){const e=[].find.call(r.children,o=>o.id==="app"),l=e.querySelector("form"),i=l.firstElementChild,t=l.lastElementChild;for(let o=0;o<1e3;o++)i.value=`Todo ${o}`,i.dispatchEvent(new Event("change")),t.dispatchEvent(new Event("click"));const n=[].slice.call(e.lastElementChild.children);for(let o=0;o<1e3;o++){const d=n[o];if(d.firstElementChild.dispatchEvent(new Event("dblclick")),d.firstElementChild.value+="updated",d.firstElementChild.dispatchEvent(Object.assign(new Event("keydown"),{key:"Enter"})),console.log(d.firstElementChild.textContent),!/updated/.test(d.firstElementChild.textContent))throw new Error("Todo was not updated")}for(let o=0;o<1e3;o++)n[o].lastElementChild.dispatchEvent(new Event("click"))}let p;document.body.prepend(mk("div",{style:"position: fixed; bottom: 0; left: 0; background: #333; color: #fff; padding: 1rem; display: flex; place-items: center;gap: 4px;"},[mk("button",{onclick(){const r=performance.now();v(document.body);const e=performance.now();p.textContent=`${e-r}ms`}},["Run Tests"]),p=mk("time",{},["0ms"])]));
